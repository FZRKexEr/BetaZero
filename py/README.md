# 训练

test_data_handler.py ： 分析最新的自我对弈数据。保存成图像在 ./images/ 目录下

main.py ： 训练模型

配置相关：学习率应该以单样本学习率为准。学习率 / batch_size 控制在 2e-5 比较好。如果loss不是稳定下降的。很可能学习率高了。前期学习率应该设置的小一点。因为前期的自我对弈数据质量极低。如果这时候学习率高了，loss会上升。

训练的流程：
1. 用最新的模型，自我对弈产生数据
2. 把数据放进经验缓冲区，缓冲区有大小限制（主要是内存不够用），这个大小感觉可以尽可能大
3. 从经验缓冲区，等概率随机采样，选 samples_per_iteration 个样本出来训练。我觉得这个数量应该和自我对弈产生的数据个数之间有比例关系。
4. 训练模型，用新模型替换旧模型

目前发现的问题：
1. 五子棋的开局始终不走天元，概率均匀分布在了天元周围四个位置。按照我的常识，五子棋第一步应该走天元才对。但是走那四个位置感觉也不会亏。不知道是不是前期陷入这个局部最优了。还是说神经网络比我厉害，不走天元真的更好。
2. 目前的自我对弈，很难走到很后期的局面。我观察过一些后期局面，很多棋局出现了很离谱的失误，然后突然某一方就赢了。不知道是不是因为数据量太少了，没有覆盖到后期局面。五子棋这个游戏，出现一个失误就很可能突然结束游戏了。不像围棋，始终是可以走到后期的，始终有后期的对弈数据。前期后期数据数量的显著不一致，不知道会不会有问题。其他游戏基本不会这样。每一次自我对弈的手数基本差不多。



